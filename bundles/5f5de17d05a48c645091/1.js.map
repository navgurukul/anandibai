{"version":3,"sources":["webpack:///./node_modules/matrix-react-sdk/src/async-components/views/dialogs/ExportE2eKeysDialog.js","webpack:///./node_modules/file-saver/FileSaver.js","webpack:///(webpack)/buildin/amd-define.js","webpack:///(webpack)/buildin/amd-options.js","webpack:///./node_modules/matrix-react-sdk/src/utils/MegolmExportEncryption.js"],"names":["createReactClass","displayName","propTypes","matrixClient","PropTypes","instanceOf","MatrixClient","isRequired","onFinished","func","getInitialState","phase","errStr","UNSAFE_componentWillMount","this","_unmounted","_passphrase1","createRef","_passphrase2","componentWillUnmount","_onPassphraseFormSubmit","ev","preventDefault","passphrase","current","value","setState","_t","_startExport","Promise","resolve","then","props","exportRoomKeys","k","MegolmExportEncryption","JSON","stringify","f","blob","Blob","type","FileSaver","saveAs","catch","e","console","error","msg","friendlyText","_onCancelClick","render","BaseDialog","sdk","disableForm","state","className","title","onSubmit","htmlFor","ref","id","autoFocus","size","disabled","onClick","view","navigator","test","userAgent","doc","document","get_URL","URL","webkitURL","save_link","createElementNS","can_use_save_link","is_safari","HTMLElement","safari","is_chrome_ios","throw_outside","ex","setImmediate","setTimeout","revoke","file","revokeObjectURL","remove","auto_bom","String","fromCharCode","name","no_auto_bom","object_url","filesaver","force","dispatch_all","event_types","event","i","concat","length","listener","call","dispatch","split","readyState","INIT","createObjectURL","node","href","download","MouseEvent","dispatchEvent","DONE","FileReader","reader","onloadend","url","result","replace","open","location","undefined","readAsDataURL","fs_error","FS_proto","prototype","msSaveOrOpenBlob","abort","WRITING","onwritestart","onprogress","onwrite","onabort","onerror","onwriteend","self","window","content","module","exports","Error","__webpack_amd_options__","TextEncoder","TextEncodingUtf8","TextDecoder","subtleCrypto","crypto","subtle","webkitSubtle","friendlyError","cryptoFailMsg","async","decryptMegolmKeyFile","data","password","body","fileStr","decode","Uint8Array","lineStart","lineEnd","indexOf","line","slice","trim","HEADER_LINE","dataStart","dataEnd","base64","latin1String","atob","uint8Array","charCodeAt","decodeBase64","unpackMegolmKeyFile","brand","SdkConfig","get","ciphertextLength","salt","subarray","iv","iterations","ciphertext","hmac","aesKey","hmacKey","deriveKeys","toVerify","isValid","plaintext","verify","decrypt","counter","encryptMegolmKeyFile","options","kdfRounds","kdf_rounds","getRandomValues","encodedData","encode","encrypt","cipherArray","bodyLength","resultBuffer","idx","set","toSign","sign","hmacArray","nLines","Math","ceil","lines","Array","o","encodeBase64","join","buffer","packMegolmKeyFile","start","Date","key","keybits","importKey","deriveBits","hash","now","log","aesProm","hmacProm","all","apply","btoa"],"mappings":"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","file":"bundles/5f5de17d05a48c645091/1.js","sourceRoot":""}