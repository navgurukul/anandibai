{"version":3,"sources":["webpack:///./node_modules/matrix-react-sdk/src/async-components/views/dialogs/ImportE2eKeysDialog.js","webpack:///./node_modules/matrix-react-sdk/src/utils/MegolmExportEncryption.js"],"names":["createReactClass","displayName","propTypes","matrixClient","PropTypes","instanceOf","MatrixClient","isRequired","onFinished","func","getInitialState","enableSubmit","phase","errStr","UNSAFE_componentWillMount","this","_unmounted","_file","createRef","_passphrase","componentWillUnmount","_onFormChange","ev","files","current","setState","value","length","_onFormSubmit","preventDefault","_startImport","file","passphrase","Promise","resolve","reject","reader","FileReader","onload","e","target","result","onerror","readAsArrayBuffer","readFileAsArrayBuffer","then","arrayBuffer","MegolmExportEncryption","keys","props","importRoomKeys","JSON","parse","catch","console","error","msg","friendlyText","_t","_onCancelClick","render","BaseDialog","sdk","disableForm","state","className","title","onSubmit","htmlFor","ref","id","type","autoFocus","onChange","disabled","size","onClick","TextEncoder","window","TextEncodingUtf8","TextDecoder","subtleCrypto","crypto","subtle","webkitSubtle","friendlyError","Error","cryptoFailMsg","async","decryptMegolmKeyFile","data","password","body","fileStr","decode","Uint8Array","lineStart","lineEnd","indexOf","line","slice","trim","HEADER_LINE","dataStart","undefined","dataEnd","base64","latin1String","atob","uint8Array","i","charCodeAt","decodeBase64","unpackMegolmKeyFile","brand","SdkConfig","get","ciphertextLength","salt","subarray","iv","iterations","ciphertext","hmac","aesKey","hmacKey","deriveKeys","toVerify","isValid","plaintext","verify","name","decrypt","counter","encryptMegolmKeyFile","options","kdfRounds","kdf_rounds","getRandomValues","encodedData","encode","encrypt","cipherArray","bodyLength","resultBuffer","idx","set","toSign","sign","hmacArray","nLines","Math","ceil","lines","Array","o","encodeBase64","join","buffer","packMegolmKeyFile","start","Date","key","keybits","importKey","deriveBits","hash","now","log","aesProm","hmacProm","all","String","fromCharCode","apply","btoa"],"mappings":"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","file":"bundles/5f5de17d05a48c645091/21.js","sourceRoot":""}